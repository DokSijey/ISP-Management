<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="<?= base_url('/assets/css/styleadmin.css') ?>">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <?= view('admin/sidebar') ?>
<div class="container-fluid p-4">
    <h2 class="mb-4">Admin Dashboard</h2>

    <!-- Single row with 4 cards -->
    <div class="row g-4 mb-4">
        <div class="col-md-3">
            <div class="card custom-card1 mb-3">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-users"></i> Total Subscribers</h5>
                    <p class="card-text"><?= $totalSubscribersCount ?></p>
                </div>
            </div>
        </div>

        <div class="col-md-2">
            <div class="card custom-card1 mb-3">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-clock"></i> Pending Applications</h5>
                    <p class="card-text"><?= $pendingApplicationsCount ?></p>
                </div>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card custom-card1 mb-3">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-check-circle"></i> Approved Applications</h5>
                    <p class="card-text"><?= $approvedApplicationsCount ?></p>
                </div>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card custom-card1 mb-3">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-times-circle"></i> Declined Applications</h5>
                    <p class="card-text"><?= $declinedApplicationsCount ?></p>
                </div>
            </div>
        </div>
    </div>
</div>

        <hr>
<div class="container-fluid p-4">
        <h4>Technician Tickets Information</h4>
       <h6>Install Tickets Information</h6>
<div class="row g-4 mb-4">
    <div class="col-md-2">
        <div class="card custom-card mb-3">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-cogs"></i> Assigned Request</h5>
                <p class="card-text"><?= $installRequestCount ?></p>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card custom-card mb-3">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-cogs"></i> On-going Request</h5>
                <p class="card-text"><?= $ongoingRequestCount ?></p>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card custom-card mb-3">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-redo-alt"></i> Re-Scheduled Requests</h5>
                <p class="card-text"><?= $rescheduledRequestCount ?></p>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card custom-card mb-3">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-ban"></i> Cancelled Requests</h5>
                <p class="card-text"><?= $cancelledRequestCount ?></p>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card custom-card mb-3">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-check"></i> Done Install</h5>
                <p class="card-text"><?= $installedCount ?></p>
            </div>
        </div>
    </div>
</div>

<h6>Repair Tickets Information</h6>
<div class="row g-4 mb-4">
    <div class="col-md-2">
        <div class="card custom-card mb-3">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-tools"></i> Assigned Repair Request</h5>
                <p class="card-text"><?= $assignedRepairTicketCount ?></p>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card custom-card mb-3">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-tools"></i> On-going Repairs</h5>
                <p class="card-text"><?= $ongoingRepairTicketCount ?></p>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card custom-card mb-3">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-redo-alt"></i> Re-Scheduled Repairs</h5>
                <p class="card-text"><?= $rescheduledRepairTicketCount ?></p>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card custom-card mb-3">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-ban"></i> Cancelled Repair Tickets</h5>
                <p class="card-text"><?= $cancelledRepairTicketCount ?></p>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card custom-card mb-3">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-check"></i> Done Repairs</h5>
                <p class="card-text"><?= $resolvedRepairTicketCount ?></p>
            </div>
        </div>
    </div>
</div>

        <hr>

        <canvas id="subscriberChart" width="400" height="200"></canvas>
    </div>

    <script>
        var ctx = document.getElementById('subscriberChart').getContext('2d');
        var subscriberChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['January', 'February', 'March', 'April'],
                datasets: [{
                    label: 'Subscribers per Month',
                    data: [10, 20, 30, 40],
                    backgroundColor: 'rgba(54, 162, 235, 0.6)'
                }]
            },
            options: {
                responsive: true,
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
